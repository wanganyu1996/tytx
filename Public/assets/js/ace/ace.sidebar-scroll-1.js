(function(E,B){var D=ace.vars["safari"]&&navigator.userAgent.match(/version\/[1-5]/i);var C="getComputedStyle" in window?function(F,G){F.offsetHeight;return window.getComputedStyle(F).position==G}:function(F,G){F.offsetHeight;return E(F).css("position")==G};function A(X,S){var c=this;var a=E(window);var N=E(X),R=N.find(".nav-list"),Z=N.find(".sidebar-toggle").eq(0),W=N.find(".sidebar-shortcuts").eq(0);var K=R.get(0);if(!K){return}var H=ace.helper.getAttrSettings(X,E.fn.ace_sidebar_scroll.defaults);this.settings=E.extend({},E.fn.ace_sidebar_scroll.defaults,S,H);var Q=c.settings.scroll_to_active;var b=N.ace_sidebar("ref");N.attr("data-sidebar-scroll","true");var T=null,F=null,P=null,I=null,M=null,Y=null;this.is_scrolling=false;var O=false;this.sidebar_fixed=C(X,"fixed");var L,V;var U=function(){var d=R.parent().offset();if(c.sidebar_fixed){d.top-=ace.helper.scrollTop()}return a.innerHeight()-d.top-(c.settings.include_toggle?0:Z.outerHeight())+1};var G=function(){return K.clientHeight};var J=function(g){if(O){return}if(!c.sidebar_fixed){return}R.wrap('<div class="nav-wrap-up pos-rel" />');R.after("<div><div></div></div>");R.wrap('<div class="nav-wrap" />');if(!c.settings.include_toggle){Z.css({"z-index":1})}if(!c.settings.include_shortcuts){W.css({"z-index":99})}T=R.parent().next().ace_scroll({size:U(),mouseWheelLock:true,hoverReset:false,dragEvent:true,styleClass:c.settings.scroll_style,touchDrag:false}).closest(".ace-scroll").addClass("nav-scroll");Y=T.data("ace_scroll");F=T.find(".scroll-content").eq(0);P=F.find(" > div").eq(0);M=E(Y.get_track());I=M.find(".scroll-bar").eq(0);if(c.settings.include_shortcuts&&W.length!=0){R.parent().prepend(W).wrapInner("<div />");R=R.parent()}if(c.settings.include_toggle&&Z.length!=0){R.append(Z);R.closest(".nav-wrap").addClass("nav-wrap-t")}R.css({position:"relative"});if(c.settings.scroll_outside==true){T.addClass("scrollout")}K=R.get(0);K.style.top=0;F.on("scroll.nav",function(){K.style.top=(-1*this.scrollTop)+"px"});R.on(!!E.event.special.mousewheel?"mousewheel.ace_scroll":"mousewheel.ace_scroll DOMMouseScroll.ace_scroll",function(j){if(!c.is_scrolling||!Y.is_active()){return !c.settings.lock_anyway}return T.trigger(j)});R.on("mouseenter.ace_scroll",function(){M.addClass("scroll-hover")}).on("mouseleave.ace_scroll",function(){M.removeClass("scroll-hover")});var h=F.get(0);R.on("ace_drag.nav",function(j){if(!c.is_scrolling||!Y.is_active()){j.retval.cancel=true;return}if(E(j.target).closest(".can-scroll").length!=0){j.retval.cancel=true;return}if(j.direction=="up"||j.direction=="down"){Y.move_bar(true);var k=j.dy;k=parseInt(Math.min(L,k));if(Math.abs(k)>2){k=k*2}if(k!=0){h.scrollTop=h.scrollTop+k;K.style.top=(-1*h.scrollTop)+"px"}}});if(c.settings.smooth_scroll){R.on("touchstart.nav MSPointerDown.nav pointerdown.nav",function(j){R.css("transition-property","none");I.css("transition-property","none")}).on("touchend.nav touchcancel.nav MSPointerUp.nav MSPointerCancel.nav pointerup.nav pointercancel.nav",function(j){R.css("transition-property","top");I.css("transition-property","top")})}if(D&&!c.settings.include_toggle){var d=Z.get(0);if(d){F.on("scroll.safari",function(){ace.helper.redraw(d)})}}O=true;if(g==true){c.reset();if(Q){c.scroll_to_active()}Q=false}if(typeof c.settings.smooth_scroll==="number"&&c.settings.smooth_scroll>0){R.css({"transition-property":"top","transition-duration":(c.settings.smooth_scroll/1000).toFixed(2)+"s"});I.css({"transition-property":"top","transition-duration":(c.settings.smooth_scroll/1500).toFixed(2)+"s"});T.on("drag.start",function(j){j.stopPropagation();R.css("transition-property","none")}).on("drag.end",function(j){j.stopPropagation();R.css("transition-property","top")})}if(ace.vars["android"]){var e=ace.helper.scrollTop();if(e<2){window.scrollTo(e,0);setTimeout(function(){c.reset()},20)}var i=ace.helper.winHeight(),f;E(window).on("scroll.ace_scroll",function(){if(c.is_scrolling&&Y.is_active()){f=ace.helper.winHeight();if(f!=i){i=f;c.reset()}}})}};this.scroll_to_active=function(){if(!Y||!Y.is_active()){return}try{var d;var i=b["vars"]();var g=N.find(".nav-list");if(i["minimized"]&&!i["collapsible"]){d=g.find("> .active")}else{d=R.find("> .active.hover");if(d.length==0){d=R.find(".active:not(.open)")}}var h=d.outerHeight();g=g.get(0);var k=d.get(0);while(k!=g){h+=k.offsetTop;k=k.parentNode}var j=h-T.height();if(j>0){K.style.top=-j+"px";F.scrollTop(j)}}catch(f){}};this.reset=function(f){if(f===true){this.sidebar_fixed=C(X,"fixed")}if(!this.sidebar_fixed){this.disable();return}if(!O){J()}var e=b["vars"]();var d=!e["collapsible"]&&!e["horizontal"]&&(L=U())<(V=K.clientHeight);this.is_scrolling=true;if(d){P.css({height:V,width:8});T.prev().css({"max-height":L});Y.update({size:L});Y.enable();Y.reset()}if(!d||!Y.is_active()){if(this.is_scrolling){this.disable()}}else{N.addClass("sidebar-scroll")}};this.disable=function(){this.is_scrolling=false;if(T){T.css({"height":"","max-height":""});P.css({height:"",width:""});T.prev().css({"max-height":""});Y.disable()}if(parseInt(K.style.top)<0&&c.settings.smooth_scroll&&E.support.transition.end){R.one(E.support.transition.end,function(){N.removeClass("sidebar-scroll");R.off(".trans")})}else{N.removeClass("sidebar-scroll")}K.style.top=0};this.prehide=function(e){if(!this.is_scrolling||b.get("minimized")){return}if(G()+e<U()){this.disable()}else{if(e<0){var d=F.scrollTop()+e;if(d<0){return}K.style.top=(-1*d)+"px"}}};this._reset=function(d){if(d===true){this.sidebar_fixed=C(X,"fixed")}if(ace.vars["webkit"]){setTimeout(function(){c.reset()},0)}else{this.reset()}};this.set_hover=function(){if(M){M.addClass("scroll-hover")}};this.get=function(d){if(this.hasOwnProperty(d)){return this[d]}};this.set=function(d,e){if(this.hasOwnProperty(d)){this[d]=e}};this.ref=function(){return this};this.updateStyle=function(d){if(Y==null){return}Y.update({styleClass:d})};N.on("hidden.ace.submenu.sidebar_scroll shown.ace.submenu.sidebar_scroll",".submenu",function(d){d.stopPropagation();if(!b.get("minimized")){c._reset();if(d.type=="shown"){c.set_hover()}}});J(true)}E(document).on("settings.ace.sidebar_scroll",function(G,H,F){E(".sidebar[data-sidebar-scroll=true]").each(function(){var K=E(this);var L=K.ace_sidebar_scroll("ref");if(H=="sidebar_collapsed"&&C(this,"fixed")){if(K.attr("data-sidebar-hover")=="true"){K.ace_sidebar_hover("reset")}L._reset()}else{if(H==="sidebar_fixed"||H==="navbar_fixed"){var J=L.get("is_scrolling");var I=C(this,"fixed");L.set("sidebar_fixed",I);if(I&&!J){L._reset()}else{if(!I){L.disable()}}}}})});E(window).on("resize.ace.sidebar_scroll",function(){E(".sidebar[data-sidebar-scroll=true]").each(function(){var G=E(this);if(G.attr("data-sidebar-hover")=="true"){G.ace_sidebar_hover("reset")}var H=E(this).ace_sidebar_scroll("ref");var F=C(this,"fixed");H.set("sidebar_fixed",F);H._reset()})});if(!E.fn.ace_sidebar_scroll){E.fn.ace_sidebar_scroll=function(F,H){var G;var I=this.each(function(){var J=E(this);var L=J.data("ace_sidebar_scroll");var K=typeof F==="object"&&F;if(!L){J.data("ace_sidebar_scroll",(L=new A(this,K)))}if(typeof F==="string"&&typeof L[F]==="function"){G=L[F](H)}});return(G===B)?I:G};E.fn.ace_sidebar_scroll.defaults={"scroll_to_active":true,"include_shortcuts":true,"include_toggle":false,"smooth_scroll":150,"scroll_outside":false,"scroll_style":"","lock_anyway":false}}})(window.jQuery);