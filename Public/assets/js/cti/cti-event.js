jQuery.namespace("cti");cti.handleAgentEvent=function(D,A,C){try{if(D==200){cti.UIManager.getInstance().changeButtonWhenReady();cti.Agent.getInstance().updateAgentState("Ready",A);cti.Agent.getInstance().changeAgentState("Ready")}else{if(D==201){cti.UIManager.getInstance().changeButtonWhenNotReady();cti.Agent.getInstance().updateAgentState("NotReady",A);cti.Agent.getInstance().changeAgentState("NotReady",A)}else{if(D==202){cti.UIManager.getInstance().changeButtonWhenLogout();cti.Agent.getInstance().updateAgentState("Logout",A);cti.Agent.getInstance().changeAgentState("Logout")}}}}catch(B){if(window.console&&window.console.log){window.console.log(B.description)}}onAgentEvent(D,A)};cti.handleVoiceEvent=function(H,D){var F=-1;var C=D.callType;var I=D.callID;var K=D.otherDN;var G=null;var J=D.attachDatas;try{switch(H){case STATUS.DIALING:G=D.creationTime;F=cti.Line.getInstance().getCurrentLineId();cti.Line.getInstance().stateChange(H,F,C,I,K,D);var B=cti.getLineNameById(F);if(cti.Line.getInstance().getCurrentLineId()==F){cti.UIManager.getInstance().changeLineButton(B,"_on","_dialing");cti.UIManager.getInstance().changeButtonWhenDialing()}else{cti.UIManager.getInstance().changeLineButton(B,"_off","_dialing")}break;case STATUS.RINGING:if(G==null){G=D.creationTime}F=cti.Line.getInstance().getFreeLine();cti.Line.getInstance().stateChange(H,F,C,I,K,D);var B=cti.getLineNameById(F);if(cti.Line.getInstance().getCurrentLineId()==F){cti.UIManager.getInstance().changeLineButton(B,"_on","_ringing");cti.UIManager.getInstance().changeButtonWhenRinging()}else{cti.UIManager.getInstance().changeLineButton(B,"_off","_ringing")}break;case STATUS.ESTABLISHED:case STATUS.RETRIEVED:F=cti.Line.getInstance().getLineByCallId(I);cti.Line.getInstance().stateChange(H,F,C,I,K,D);var B=cti.getLineNameById(F);if(cti.Line.getInstance().getCurrentLineId()==F){cti.UIManager.getInstance().changeLineButton(B,"_on","_talking");cti.UIManager.getInstance().changeButtonWhenTalking(J["campaignType"])}else{cti.UIManager.getInstance().changeLineButton(B,"_off","_talking")}if(H==STATUS.ESTABLISHED){if(C==CALLTYPE.INBOUND||C==CALLTYPE.OUTBOUND){cti.agentNotReady(1)}var E=cti.Line.getInstance().getLineKey(F);cti.startTimer(E)}break;case STATUS.HELD:F=cti.Line.getInstance().getLineByCallId(I);cti.Line.getInstance().stateChange(H,F,C,I,K,D);var B=cti.getLineNameById(F);if(cti.Line.getInstance().getCurrentLineId()==F){cti.UIManager.getInstance().changeLineButton(B,"_on","_hold");cti.UIManager.getInstance().changeButtonWhenHold()}else{cti.UIManager.getInstance().changeLineButton(B,"_off","_hold")}break;case STATUS.IDLE:F=cti.Line.getInstance().getLineByCallId(I);cti.Line.getInstance().stateChange(H,F,C,I,K,D);var B=cti.getLineNameById(F);if(cti.Line.getInstance().getCurrentLineId()==F){cti.UIManager.getInstance().changeLineButton(B,"_on","_idle");cti.UIManager.getInstance().changeButtonWhenIdle()}else{cti.UIManager.getInstance().changeLineButton(B,"_off","_idle")}if(C==CALLTYPE.INBOUND||C==CALLTYPE.OUTBOUND){cti.agentNotReady(0)}var E=cti.Line.getInstance().getLineKey(F);cti.stopTimer(E);auto_save();break;default:break}}catch(A){if(window.console&&window.console.log){window.console.log(A.description)}}try{if(D.thisRole!=5&&C!=1&&D.attachDatas["variable_thirdPartyRole"]==null){onPopupEvent(H,F,C,I,K,J,G)}}catch(A){if(window.console&&window.console.log){window.console.log(A.description)}}};