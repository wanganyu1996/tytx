/*
* artDialog 5.0.2
* Date: 2012-11-11
* https://github.com/aui/artDialog
* (c) 2009-2012 TangBin, http://www.planeArt.cn
*
* This is licensed under the GNU LGPL, version 2.1 or later.
* For details, see: http://creativecommons.org/licenses/LGPL/2.1/
*/
(function(A,D){function B(I,L,O){L=L||document,O=O||"*";var K=0,N=0,J=[],P=L.getElementsByTagName(O),M=P.length,Q=new RegExp("(^|\\s)"+I+"(\\s|$)");for(;K<M;K++){Q.test(P[K].className)&&(J[N]=P[K],N++)}return J}function H(I){var J=G.expando,K=I===A?0:I[J];return K===D&&(I[J]=K=++G.uuid),K}function E(I){return G.isWindow(I)?I:I.nodeType===9?I.defaultView||I.parentWindow:!1}var G=A.art=function(I,J){return new G.fn.constructor(I,J)},C=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/,F=/[\n\t]/g;return A.$===D&&(A.$=G),G.fn=G.prototype={constructor:function(J,L){var K,I;L=L||document;if(!J){return this}if(J.nodeType){return this[0]=J,this}if(typeof J=="string"){K=C.exec(J);if(K&&K[2]){return I=L.getElementById(K[2]),I&&I.parentNode&&(this[0]=I),this}}return this[0]=J,this},hasClass:function(I){var J=" "+I+" ";return(" "+this[0].className+" ").replace(F," ").indexOf(J)>-1?!0:!1},addClass:function(I){return this.hasClass(I)||(this[0].className+=" "+I),this},removeClass:function(I){var J=this[0];return I?this.hasClass(I)&&(J.className=J.className.replace(I," ")):J.className="",this},css:function(J,I){var K,L=this[0],M=arguments[0];if(typeof J=="string"){if(I===D){return G.css(L,J)}L.style[J]=I}else{for(K in M){L.style[K]=M[K]}}return this},show:function(){return this.css("display","block")},hide:function(){return this.css("display","none")},offset:function(){var I=this[0],L=I.getBoundingClientRect(),O=I.ownerDocument,K=O.body,N=O.documentElement,J=N.clientTop||K.clientTop||0,P=N.clientLeft||K.clientLeft||0,M=L.top+(self.pageYOffset||N.scrollTop)-J,Q=L.left+(self.pageXOffset||N.scrollLeft)-P;return{left:Q,top:M}},html:function(J){var I=this[0];return J===D?I.innerHTML:(G.cleanData(I.getElementsByTagName("*")),I.innerHTML=J,this)},remove:function(){var I=this[0];return G.cleanData(I.getElementsByTagName("*")),G.cleanData([I]),I.parentNode.removeChild(I),this},bind:function(I,J){return G.event.add(this[0],I,J),this},unbind:function(I,J){return G.event.remove(this[0],I,J),this}},G.fn.constructor.prototype=G.fn,G.isWindow=function(I){return I&&typeof I=="object"&&"setInterval" in I},G.fn.find=function(J){var L,I=this[0],K=J.split(".")[1];return K?document.getElementsByClassName?L=I.getElementsByClassName(K):L=B(K,I):L=I.getElementsByTagName(J),G(L[0])},G.each=function(J,K){var I,L=0,M=J.length,N=M===D;if(N){for(I in J){if(K.call(J[I],I,J[I])===!1){break}}}else{for(var O=J[0];L<M&&K.call(O,L,O)!==!1;O=J[++L]){}}return J},G.data=function(J,I,K){var L=G.cache,M=H(J);return I===D?L[M]:(L[M]||(L[M]={}),K!==D&&(L[M][I]=K),L[M][I])},G.removeData=function(I,L){var K=!0,N=G.expando,J=G.cache,M=H(I),O=M&&J[M];if(!O){return}if(L){delete O[L];for(var P in O){K=!1}K&&delete G.cache[M]}else{delete J[M],I.removeAttribute?I.removeAttribute(N):I[N]=null}},G.uuid=0,G.cache={},G.expando="@cache"+ +(new Date),G.event={add:function(J,N,I){var K,L,M=G.event,O=G.data(J,"@events")||G.data(J,"@events",{});K=O[N]=O[N]||{},L=K.listeners=K.listeners||[],L.push(I),K.handler||(K.elem=J,K.handler=M.handler(K),J.addEventListener?J.addEventListener(N,K.handler,!1):J.attachEvent("on"+N,K.handler))},remove:function(I,L,K){var N,J,O,M=G.event,Q=!0,R=G.data(I,"@events");if(!R){return}if(!L){for(N in R){M.remove(I,N)}return}J=R[L];if(!J){return}O=J.listeners;if(K){for(N=0;N<O.length;N++){O[N]===K&&O.splice(N--,1)}}else{J.listeners=[]}if(J.listeners.length===0){I.removeEventListener?I.removeEventListener(L,J.handler,!1):I.detachEvent("on"+L,J.handler),delete R[L],J=G.data(I,"@events");for(var P in J){Q=!1}Q&&G.removeData(I,"@events")}},handler:function(I){return function(J){J=G.event.fix(J||A.event);for(var K=0,L=I.listeners,M;M=L[K++];){M.call(I.elem,J)===!1&&(J.preventDefault(),J.stopPropagation())}}},fix:function(I){if(I.target){return I}var K={target:I.srcElement||document,preventDefault:function(){I.returnValue=!1},stopPropagation:function(){I.cancelBubble=!0}};for(var J in I){K[J]=I[J]}return K}},G.cleanData=function(J){var N=0,I,K=J.length,L=G.event.remove,M=G.removeData;for(;N<K;N++){I=J[N],L(I),M(I)}},G.css="defaultView" in document&&"getComputedStyle" in document.defaultView?function(I,J){return document.defaultView.getComputedStyle(I,!1)[J]}:function(I,J){return I.currentStyle[J]||""},G.each(["Left","Top"],function(J,K){var I="scroll"+K;G.fn[I]=function(){var M=this[0],L;return L=E(M),L?"pageXOffset" in L?L[J?"pageYOffset":"pageXOffset"]:L.document.documentElement[I]||L.document.body[I]:M[I]}}),G.each(["Height","Width"],function(J,K){var I=K.toLowerCase();G.fn[I]=function(M){var L=this[0];return L?G.isWindow(L)?L.document.documentElement["client"+K]||L.document.body["client"+K]:L.nodeType===9?Math.max(L.documentElement["client"+K],L.body["scroll"+K],L.documentElement["scroll"+K],L.body["offset"+K],L.documentElement["offset"+K]):null:M==null?null:this}}),G})(window),function(A,D,G){if(document.compatMode==="BackCompat"){throw new Error("artDialog: Document types require more than xhtml1.0")}var C,F=0,B=A(document.getElementsByTagName("html")[0]),H="artDialog"+ +(new Date),E=D.VBArray&&!D.XMLHttpRequest,J="createTouch" in document&&!("onmousemove" in document)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),K=!E&&!J,I=function(M,P,N){M=M||{};if(typeof M=="string"||M.nodeType===1){M={content:M,fixed:!J}}var Q,R=I.defaults,L=M.follow=this.nodeType===1&&this||M.follow;for(var O in R){M[O]===G&&(M[O]=R[O])}M.id=L&&L[H+"follow"]||M.id||H+F,Q=I.list[M.id];if(Q){return L&&Q.follow(L),Q.zIndex().focus(),Q}K||(M.fixed=!1);if(!M.button||!M.button.push){M.button=[]}return P!==G&&(M.ok=P),M.ok&&M.button.push({id:"ok",value:M.okValue,callback:M.ok,focus:!0}),N!==G&&(M.cancel=N),M.cancel&&M.button.push({id:"cancel",value:M.cancelValue,callback:M.cancel}),I.defaults.zIndex=M.zIndex,F++,I.list[M.id]=C?C.constructor(M):new I.fn.constructor(M)};I.version="5.0.2",I.fn=I.prototype={constructor:function(L){var M;return this.closed=!1,this.config=L,this.dom=M=this.dom||this._getDom(),L.skin&&M.wrap.addClass(L.skin),M.wrap.css("position",L.fixed?"fixed":"absolute"),M.close[L.cancel===!1?"hide":"show"](),M.content.css("padding",L.padding),this.button.apply(this,L.button),this.title(L.title).content(L.content).size(L.width,L.height).time(L.time),this._reset(),this.zIndex(),L.lock&&this.lock(),this._addEvent(),this[L.visible?"visible":"hidden"]().focus(),C=null,L.initialize&&L.initialize.call(this),this},content:function(N){var Q,L,P,M,R=this,O=this.dom.content,S=O[0];return this._elemBack&&(this._elemBack(),delete this._elemBack),typeof N=="string"?O.html(N):N&&N.nodeType===1&&(M=N.style.display,Q=N.previousSibling,L=N.nextSibling,P=N.parentNode,this._elemBack=function(){Q&&Q.parentNode?Q.parentNode.insertBefore(N,Q.nextSibling):L&&L.parentNode?L.parentNode.insertBefore(N,L):P&&P.appendChild(N),N.style.display=M,R._elemBack=null},O.html(""),S.appendChild(N),A(N).show()),this._reset(),this},title:function(M){var P=this.dom,N=P.outer,L=P.title,O="d-state-noTitle";return M===!1?(L.hide().html(""),N.addClass(O)):(L.show().html(M),N.removeClass(O)),this},position:function(){var L=this.dom,P=L.wrap[0],T=L.window,O=L.document,S=this.config.fixed,M=S?0:O.scrollLeft(),Q=S?0:O.scrollTop(),W=T.width(),X=T.height(),U=P.offsetWidth,V=P.offsetHeight,R=(W-U)/2+M,N=(X-V)*382/1000+Q,Y=P.style;return Y.left=Math.max(parseInt(R),M)+"px",Y.top=Math.max(parseInt(N),Q)+"px",this._follow&&(this._follow.removeAttribute(H+"follow"),this._follow=null),this},size:function(L,N){var M=this.dom.main[0].style;return typeof L=="number"&&(L+="px"),typeof N=="number"&&(N+="px"),M.width=L,M.height=N,this},follow:function(R){var X=A(R),L=this.config;if(!R||!R.offsetWidth&&!R.offsetHeight){return this.position(this._left,this._top)}var W=L.fixed,M=H+"follow",U=this.dom,k=U.window,o=U.document,Y=k.width(),j=k.height(),V=o.scrollLeft(),O=o.scrollTop(),z=X.offset(),P=R.offsetWidth,Z=R.offsetHeight,q=W?z.left-V:z.left,Af=W?z.top-O:z.top,e=this.dom.wrap[0],Q=e.style,Ad=e.offsetWidth,Ag=e.offsetHeight,Ae=q-(Ad-P)/2,Ab=Af+Z,Aa=W?0:V,Ac=W?0:O;return Ae=Ae<Aa?q:Ae+Ad>Y&&q-Ad>Aa?q-Ad+P:Ae,Ab=Ab+Ag>j+Ac&&Af-Ag>Ac?Af-Ag:Ab,Q.left=parseInt(Ae)+"px",Q.top=parseInt(Ab)+"px",this._follow&&this._follow.removeAttribute(M),this._follow=R,R[M]=L.id,this},button:function(){var O=this.dom,S=O.buttons,L=S[0],R="d-state-highlight",M=this._listeners=this._listeners||{},P=[].slice.call(arguments),V=0,W,T,U,Q,N;for(;V<P.length;V++){W=P[V],T=W.value,U=W.id||T,Q=!M[U],N=Q?document.createElement("input"):M[U].elem,N.type="button",N.className="d-button",M[U]||(M[U]={}),T&&(N.value=T),W.width&&(N.style.width=W.width),W.callback&&(M[U].callback=W.callback),W.focus&&(this._focus&&this._focus.removeClass(R),this._focus=A(N).addClass(R),this.focus()),N[H+"callback"]=U,N.disabled=!!W.disabled,Q&&(M[U].elem=N,L.appendChild(N))}return S[0].style.display=P.length?"":"none",this},visible:function(){return this.dom.wrap.css("visibility","visible"),this.dom.outer.addClass("d-state-visible"),this._isLock&&this._lockMask.show(),this},hidden:function(){return this.dom.wrap.css("visibility","hidden"),this.dom.outer.removeClass("d-state-visible"),this._isLock&&this._lockMask.hide(),this},close:function(){if(this.closed){return this}var M=this.dom,P=M.wrap,N=I.list,L=this.config.beforeunload;if(L&&L.call(this)===!1){return this}I.focus===this&&(I.focus=null),this._follow&&this._follow.removeAttribute(H+"follow"),this._elemBack&&this._elemBack(),this.time(),this.unlock(),this._removeEvent(),delete N[this.config.id];if(C){P.remove()}else{C=this,M.title.html(""),M.content.html(""),M.buttons.html(""),P[0].className=P[0].style.cssText="",M.outer[0].className="d-outer",P.css({left:0,top:0,position:K?"fixed":"absolute"});for(var O in this){this.hasOwnProperty(O)&&O!=="dom"&&delete this[O]}this.hidden()}return this.closed=!0,this},time:function(L){var N=this,M=this._timer;return M&&clearTimeout(M),L&&(this._timer=setTimeout(function(){N._click("cancel")},L)),this},focus:function(){if(this.config.focus){try{var L=this._focus&&this._focus[0]||this.dom.close[0];L&&L.focus()}catch(M){}}return this},zIndex:function(){var L=this.dom,N=I.focus,M=I.defaults.zIndex++;return L.wrap.css("zIndex",M),this._lockMask&&this._lockMask.css("zIndex",M-1),N&&N.dom.outer.removeClass("d-state-focus"),I.focus=this,L.outer.addClass("d-state-focus"),this},lock:function(){if(this._isLock){return this}var M=this,L=this.config,N=this.dom,O=document.createElement("div"),P=A(O),Q=I.defaults.zIndex-1;return this.zIndex(),N.outer.addClass("d-state-lock"),P.css({zIndex:Q,position:"fixed",left:0,top:0,width:"100%",height:"100%",overflow:"hidden"}).addClass("d-mask"),K||P.css({position:"absolute",width:A(D).width()+"px",height:A(document).height()+"px"}),P.bind("dblclick",function(){M._click("cancel")}),document.body.appendChild(O),this._lockMask=P,this._isLock=!0,this},unlock:function(){return this._isLock?(this._lockMask.unbind(),this._lockMask.hide(),this._lockMask.remove(),this.dom.outer.removeClass("d-state-lock"),this._isLock=!1,this):this},_getDom:function(){var M=document.body;if(!M){throw new Error('artDialog: "documents.body" not ready')}var L=document.createElement("div");L.style.cssText="position:absolute;left:0;top:0",L.innerHTML=I._templates,M.insertBefore(L,M.firstChild);var N,O=0,P={},Q=L.getElementsByTagName("*"),R=Q.length;for(;O<R;O++){N=Q[O].className.split("d-")[1],N&&(P[N]=A(Q[O]))}return P.window=A(D),P.document=A(document),P.wrap=A(L),P},_click:function(L){var M=this._listeners[L]&&this._listeners[L].callback;return typeof M!="function"||M.call(this)!==!1?this.close():this},_reset:function(){var L=this.config.follow||this._follow;L?this.follow(L):this.position()},_addEvent:function(){var L=this,M=this.dom;M.wrap.bind("click",function(O){var N=O.target,P;if(N.disabled){return !1}if(N===M.close[0]){return L._click("cancel"),!1}P=N[H+"callback"],P&&L._click(P)}).bind("mousedown",function(){L.zIndex()})},_removeEvent:function(){this.dom.wrap.unbind()}},I.fn.constructor.prototype=I.fn,A.fn.dialog=A.fn.artDialog=function(){var L=arguments;return this[this.live?"live":"bind"]("click",function(){return I.apply(this,L),!1}),this},I.focus=null,I.get=function(L){return L===G?I.list:I.list[L]},I.list={},A(document).bind("keydown",function(M){var Q=M.target,N=Q.nodeName,L=/^input|textarea$/i,O=I.focus,P=M.keyCode;if(!O||!O.config.esc||L.test(N)&&Q.type!=="button"){return}P===27&&O._click("cancel")}),A(D).bind("resize",function(){var L=I.list;for(var M in L){L[M]._reset()}}),I._templates='<div class="d-outer"><table class="d-border"><tbody><tr><td class="d-nw"></td><td class="d-n"></td><td class="d-ne"></td></tr><tr><td class="d-w"></td><td class="d-c"><div class="d-inner"><table class="d-dialog"><tbody><tr><td class="d-header"><div class="d-titleBar"><div class="d-title"></div><a class="d-close" href="javascript:/*artDialog*/;" hideFocus="true">\u00d7</a></div></td></tr><tr><td class="d-main"><div class="d-content"></div></td></tr><tr><td class="d-footer"><div class="d-buttons"></div></td></tr></tbody></table></div></td><td class="d-e"></td></tr><tr><td class="d-sw"></td><td class="d-s"></td><td class="d-se"></td></tr></tbody></table></div>',I.defaults={content:'<div class="d-loading"><span>loading..</span></div>',title:"系统提示",button:null,ok:null,cancel:null,initialize:null,beforeunload:null,okValue:"确定",cancelValue:"取消",width:"auto",height:"auto",padding:"20px 25px",skin:null,time:null,esc:!0,focus:!0,visible:!0,follow:null,lock:!1,fixed:!1,zIndex:1987},this.artDialog=A.dialog=A.artDialog=I}(this.art||this.jQuery,this);