(function(I){I.alert=I.dialog.alert=function(J,K){return I.dialog({id:"Alert",fixed:!0,lock:!0,content:J,ok:!0,beforeunload:K})};I.confirm=I.dialog.confirm=function(K,L,J){return I.dialog({id:"Confirm",fixed:!0,lock:!0,content:K,ok:L,cancel:J})};I.prompt=I.dialog.prompt=function(L,M,K){var J;return I.dialog({id:"Prompt",fixed:!0,lock:!0,content:['<div style="margin-bottom:5px;font-size:12px">',L,'</div><div><input type="text" class="d-input-text" value="',K||"",'" style="width:18em;padding:6px 4px" /></div>'].join(""),initialize:function(){J=this.dom.content.find(".d-input-text")[0];J.select();J.focus()},ok:function(){return M&&M.call(this,J.value)},cancel:function(){}})};I.dialog.prototype.shake=function(){var J=function(P,N,O){var L=+new Date,M=setInterval(function(){var Q=(+new Date-L)/O;1<=Q?(clearInterval(M),N(Q)):P(Q)},13)},K=function(P,M,L,N){var O=N;void 0===O&&(O=6,L/=O);var Q=parseInt(P.style.marginLeft)||0;J(function(R){P.style.marginLeft=Q+(M-Q)*R+"px"},function(){0!==O&&K(P,1===O?0:1.3*(M/O-M),L,--O)},L)};return function(){K(this.dom.wrap[0],40,600);return this}}();var H=function(){var J=this,K=function(M){var L=J[M];J[M]=function(){return L.apply(J,arguments)}};K("start");K("over");K("end")};H.prototype={start:function(J){I(document).bind("mousemove",this.over).bind("mouseup",this.end);this._sClientX=J.clientX;this._sClientY=J.clientY;this.onstart(J.clientX,J.clientY);return !1},over:function(J){this._mClientX=J.clientX;this._mClientY=J.clientY;this.onover(J.clientX-this._sClientX,J.clientY-this._sClientY);return !1},end:function(J){I(document).unbind("mousemove",this.over).unbind("mouseup",this.end);this.onend(J.clientX,J.clientY);return !1}};var D=I(window),E=I(document),F=document.documentElement,B=!!("minWidth" in F.style)&&"onlosecapture" in F,C="setCapture" in F,A=function(){return !1},G=function(S){var U=new H,T=artDialog.focus,X=T.dom,W=X.wrap,O=X.title,Y=W[0],V=O[0],P=X.main[0],R=Y.style,J=P.style,M=S.target===X.se[0]?!0:!1,N=(X="fixed"===Y.style.position)?0:E.scrollLeft(),K=X?0:E.scrollTop(),Q=D.width()-Y.offsetWidth+N,Z=D.height()-Y.offsetHeight+K,L,k,m,j;U.onstart=function(){M?(L=P.offsetWidth,k=P.offsetHeight):(m=Y.offsetLeft,j=Y.offsetTop);E.bind("dblclick",U.end).bind("dragstart",A);B?O.bind("losecapture",U.end):D.bind("blur",U.end);C&&V.setCapture();W.addClass("d-state-drag");T.focus()};U.onover=function(h,f){if(M){var g=h+L,e=f+k;R.width="auto";J.width=Math.max(0,g)+"px";R.width=Y.offsetWidth+"px";J.height=Math.max(0,e)+"px"}else{g=Math.max(N,Math.min(Q,h+m)),e=Math.max(K,Math.min(Z,f+j)),R.left=g+"px",R.top=e+"px"}};U.onend=function(){E.unbind("dblclick",U.end).unbind("dragstart",A);B?O.unbind("losecapture",U.end):D.unbind("blur",U.end);C&&V.releaseCapture();W.removeClass("d-state-drag")};U.start(S)};I(document).bind("mousedown",function(K){var M=artDialog.focus;if(M){var L=K.target,J=M.config,M=M.dom;if(!1!==J.drag&&L===M.title[0]||!1!==J.resize&&L===M.se[0]){return G(K),!1}}})})(this.art||this.jQuery);