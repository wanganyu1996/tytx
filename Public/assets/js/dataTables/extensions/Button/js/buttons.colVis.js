/*
 * Column visibility buttons for Buttons and DataTables.
 * 2015 SpryMedia Ltd - datatables.net/license
 */
(function(A){if(typeof define==="function"&&define.amd){define(["jquery","datatables.net","datatables.net-buttons"],function(B){return A(B,window,document)})}else{if(typeof exports==="object"){module.exports=function(B,C){if(!B){B=window}if(!C||!C.fn.dataTable){C=require("datatables.net")(B,C).$}if(!C.fn.dataTable.Buttons){require("datatables.net-buttons")(B,C)}return A(C,B,B.document)}}else{A(jQuery,window,document)}}}(function(E,A,B,C){var D=E.fn.dataTable;E.extend(D.ext.buttons,{colvis:function(F,G){return{extend:"collection",text:function(H){return H.i18n("buttons.colvis","Column visibility")},className:"buttons-colvis",buttons:[{extend:"columnsToggle",columns:G.columns}]}},columnsToggle:function(F,G){var H=F.columns(G.columns).indexes().map(function(I){return{extend:"columnToggle",columns:I}}).toArray();return H},columnToggle:function(F,G){return{extend:"columnVisibility",columns:G.columns}},columnsVisibility:function(F,G){var H=F.columns(G.columns).indexes().map(function(I){return{extend:"columnVisibility",columns:I,visibility:G.visibility}}).toArray();return H},columnVisibility:{columns:C,text:function(F,H,G){return G._columnText(F,G.columns)},className:"buttons-columnVisibility",action:function(G,F,I,H){var J=F.columns(H.columns);var K=J.visible();J.visible(H.visibility!==C?H.visibility:!(K.length?K[0]:false))},init:function(F,J,I){var H=this;var G=F.column(I.columns);F.on("column-visibility.dt"+I.namespace,function(K,L,M,N){if(M===I.columns){H.active(N)}}).on("column-reorder.dt"+I.namespace,function(K,M,L){if(F.columns(I.columns).count()!==1){return}if(typeof I.columns==="number"){I.columns=L.mapping[I.columns]}var N=F.column(I.columns);H.text(I._columnText(F,I.columns));H.active(N.visible())});this.active(G.visible())},destroy:function(F,H,G){F.off("column-visibility.dt"+G.namespace).off("column-reorder.dt"+G.namespace)},_columnText:function(F,G){var H=F.column(G).index();return F.settings()[0].aoColumns[H].sTitle.replace(/\n/g," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,"")}},colvisRestore:{className:"buttons-colvisRestore",text:function(F){return F.i18n("buttons.colvisRestore","Restore visibility")},init:function(F,H,G){G._visOriginal=F.columns().indexes().map(function(I){return F.column(I).visible()}).toArray()},action:function(G,F,I,H){F.columns().every(function(J){var K=F.colReorder&&F.colReorder.transpose?F.colReorder.transpose(J,"toOriginal"):J;this.visible(H._visOriginal[K])})}},colvisGroup:{className:"buttons-colvisGroup",action:function(G,F,I,H){F.columns(H.show).visible(true);F.columns(H.hide).visible(false)},show:[],hide:[]}});return D.Buttons}));